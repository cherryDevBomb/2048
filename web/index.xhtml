<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui">
<link rel="stylesheet" type="text/css" href="style.css"/>

<h:head>
    <title>2048</title>
</h:head>

<h:body>
    <h:form styleClass="page-container">
        <p:hotkey bind="left" update="grid scoreboard dialogWon dialogLost" action="#{gameBean.moveLeft}"/>
        <p:hotkey bind="right" update="grid scoreboard dialogWon dialogLost" action="#{gameBean.moveRight}"/>
        <p:hotkey bind="up" update="grid scoreboard dialogWon dialogLost" action="#{gameBean.moveUp}"/>
        <p:hotkey bind="down" update="grid scoreboard dialogWon dialogLost" action="#{gameBean.moveDown}"/>

        <h:panelGroup id="page" display="block" styleClass="header">
            <h:outputText value="2048" styleClass="title" />

            <h:panelGroup id="scoreboard" styleClass="score-container">
                <h:outputText value="SCORE" style="grid-row: 1; margin-bottom: 5px; font-size: 13px; color: #707070;"/>
                <h:outputText value="#{gameBean.score}" style="grid-row: 2; font-size:20px; font-weight: bold" />
            </h:panelGroup>
        </h:panelGroup>

        <p:dialog id="dialogWon" widgetVar="dlg1" visible="#{gameBean.showWonDialog}" draggable="false" resizable="false" closable="false" showHeader="false" styleClass="dialog">

            <h:panelGrid id="dialog-won-grid" columns="1" padding="40" cellspacing="20" border="0">
                <h:outputText value="#{gameBean.gameOverMessage}" styleClass="game-over-message"/>

                <h:panelGroup id="dialog-won-buttons" display="block" cellspacing="50" style="position: center;">
                    <h:commandButton value="Continue" action="#{gameBean.continueGame}" update="grid scoreboard dialog" styleClass="play-continue-button" />
                    <h:commandButton value="New Game" action="#{gameBean.reset}" update="grid scoreboard dialog" styleClass="new-game-button" />
                </h:panelGroup>
            </h:panelGrid>
        </p:dialog>


        <p:dialog id="dialogLost" widgetVar="dlg1" visible="#{gameBean.showLostDialog}" draggable="false" resizable="false" closable="false" showHeader="false" styleClass="dialog">

            <h:panelGrid id="dialog-lost-grid" columns="1" padding="40" cellspacing="20" border="0">
                <h:outputText value="#{gameBean.gameOverMessage}" styleClass="game-over-message"/>
                <h:panelGroup id="dialog-lost-buttons" display="block" cellspacing="50" style="position: center;">
                    <h:commandButton value="New Game" action="#{gameBean.reset}" update="grid scoreboard dialog" styleClass="new-game-button" />
                </h:panelGroup>
            </h:panelGrid>
        </p:dialog>


        <h:panelGrid id="grid" columns="4" styleClass="game-container" cellspacing="10">


            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(0,0)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(0,0)}" style="#{gameBean.getCellFontStyle(0,0)}"/>
            </h:panelGrid>

            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(0,1)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(0,1)}" style="#{gameBean.getCellFontStyle(0,1)}"/>
            </h:panelGrid>

            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(0,2)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(0,2)}" style="#{gameBean.getCellFontStyle(0,2)}"/>
            </h:panelGrid>

            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(0,3)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(0,3)}" style="#{gameBean.getCellFontStyle(0,3)}"/>
            </h:panelGrid>


            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(1,0)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(1,0)}" style="#{gameBean.getCellFontStyle(1,0)}"/>
            </h:panelGrid>

            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(1,1)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(1,1)}" style="#{gameBean.getCellFontStyle(1,1)}"/>
            </h:panelGrid>

            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(1,2)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(1,2)}" style="#{gameBean.getCellFontStyle(1,2)}"/>
            </h:panelGrid>

            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(1,3)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(1,3)}" style="#{gameBean.getCellFontStyle(1,3)}"/>
            </h:panelGrid>


            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(2,0)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(2,0)}" style="#{gameBean.getCellFontStyle(2,0)}"/>
            </h:panelGrid>

            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(2,1)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(2,1)}" style="#{gameBean.getCellFontStyle(2,1)}"/>
            </h:panelGrid>

            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(2,2)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(2,2)}" style="#{gameBean.getCellFontStyle(2,2)}"/>
            </h:panelGrid>

            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(2,3)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(2,3)}" style="#{gameBean.getCellFontStyle(2,3)}"/>
            </h:panelGrid>


            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(3,0)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(3,0)}" style="#{gameBean.getCellFontStyle(3,0)}"/>
            </h:panelGrid>

            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(3,1)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(3,1)}" style="#{gameBean.getCellFontStyle(3,1)}"/>
            </h:panelGrid>

            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(3,2)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(3,2)}" style="#{gameBean.getCellFontStyle(3,2)}"/>
            </h:panelGrid>

            <h:panelGrid columns="1" bgcolor="#{gameBean.getCellColor(3,3)}" styleClass="grid-cell">
                <h:outputText value="#{gameBean.getCellValue(3,3)}" style="#{gameBean.getCellFontStyle(3,3)}"/>
            </h:panelGrid>

        </h:panelGrid>

    </h:form>
</h:body>
</html>
